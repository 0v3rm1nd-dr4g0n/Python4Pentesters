from lxml import html
import requests
import sys

if __name__ == "__main__":
    def usage():
        print "%s <url>" % (sys.argv[0])
    if (len(sys.argv) <> 2):
        usage()
        sys.exit(0)

    url = sys.argv[1]

    # issue the HTTP Request for the target page
    page = requests.get(url)

    # You can now view the content of the response via
    # page.content

    # Or you can transform it into a XML tree like this
    tree = html.fromstring(page.content)

    # You can then use Xpath systax to access specific parts of the webpage
    # values = tree.xpath('//..../text()')
    # print values

    # This is a very simple XPath to extract all links from a page
    values = tree.xpath('//a/@href')

    # we can unique a list of strings by converting it to a SET and back like this
    values = list(set(values))

    # we can then print the list of links
    for value in values:
        print value
